COOKIES

SE CREAN DEL PAQUETE OWA_COOKIE.COOKIE (ES UN TIPO)
V_COKIE  OWA_COOKIE.COOKIE;
V_COKIE2  OWA_COOKIE.COOKIE;
V_COKIE3  OWA_COOKIE.COOKIE;


OWA_UTIL.MIME_HEADER(CCONTENT_TYPE=>'TEXT/HTML' BCLOSE_HEADER =>FALSE);
CON ESTO ABRIMOS LA CABECERA

V_COOKIE:=OWA_COOKIE.GET('CONTA') -- CON ESTO LEO LA COOKIE A VER SI HA SIDO CREADA

--SI NO HAU NADA SU NUM_VALS ES = A 0
IF( V_COOKIE.NUM_VALS = 0)  THEN
-- AL NO EXISITIR ... CREO LA COOKIE CON OWA_COOKIE.SEND
OWA_COOKIE.SEND(NAME=>'CONTA',VALUE=>1, EXPIRES =>SYSDATE+1);

-- SI NO PONES EXPIRES LA COOKIE MUERE CUANDO CIERRAS EL NAVEGADOR;

ELSE 
	OWA_COOKIE.SEND(NAME=>'CONTA', VALUE=> V_COOKIE.VALS(1)+1, EXPIRES=> SYSDATE+1);
-- CON SEND O CREA LA COOKIE O LA SOBREESCRIBE 
-- LAS COOKIES SON ARRAYS ... DE AHI NUM_VALS = 0 , QUE SIGNIFICA SI LENGTH =0
-- POR ESO COGEMOS VALS(1) QUE ES EL PRIMER ELEMENTO DEL ARRAY QUE ES LA COOKIE

END IF;

OWA_UTL.MIME_HEADER(BCLOSE_HEADER=> TRUE);
